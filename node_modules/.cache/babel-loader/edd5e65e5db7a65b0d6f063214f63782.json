{"ast":null,"code":"import _toConsumableArray from\"/Users/narektsaturyan/Documents/GitHub/Testing/MovieApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/narektsaturyan/Documents/GitHub/Testing/MovieApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{getTrendingMovies}from\"../utilis/Api\";import{getGenres}from\"../services/fakeGenreService\";import Movies from\"./movies\";import LoadingBar from\"./common/loadingBar\";import PageButtons from\"./common/pageButtons\";function Index(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),genres=_useState4[0],setGenres=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),heading=_useState6[0],setHeading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),totalPages=_useState10[0],setTotalPages=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),activePage=_useState12[0],setActivePage=_useState12[1];useEffect(function(){setIsLoading(true);var allGenres=[{name:\"All Genres\"}].concat(_toConsumableArray(getGenres()));setGenres(allGenres);setHeading(\"Top Trending Movies\");getTrendingMovies(activePage).then(function(res){setTotalPages(res.total_pages);setMovies(res.results);setActivePage(Number(props.match.params.page)||1);setIsLoading(false);});},[props.match.params,activePage]);var pageChange=function pageChange(btn){if(btn===\"next\"){setActivePage(function(page){return page+1;});}else if(btn===\"back\"){setActivePage(function(page){return page-1;});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{style:{maxWidth:1146},className:\"container-fluid mt-5\"},/*#__PURE__*/React.createElement(Movies,{heading:heading,movies:movies,genres:genres}),isLoading?/*#__PURE__*/React.createElement(LoadingBar,null):null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(PageButtons,{pageChange:pageChange,activePage:activePage,totalPages:totalPages}))));}export default Index;","map":{"version":3,"sources":["/Users/narektsaturyan/Documents/GitHub/Testing/MovieApp/src/components/index.js"],"names":["React","useState","useEffect","getTrendingMovies","getGenres","Movies","LoadingBar","PageButtons","Index","props","movies","setMovies","genres","setGenres","heading","setHeading","isLoading","setIsLoading","totalPages","setTotalPages","activePage","setActivePage","allGenres","name","then","res","total_pages","results","Number","match","params","page","pageChange","btn","maxWidth"],"mappings":"oWAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,iBAAT,KAAkC,eAAlC,CACA,OAASC,SAAT,KAA0B,8BAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,sBAAxB,CAEA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,eACQR,QAAQ,CAAC,EAAD,CADhB,wCACbS,MADa,eACLC,SADK,8BAEQV,QAAQ,CAAC,EAAD,CAFhB,yCAEbW,MAFa,eAELC,SAFK,8BAGUZ,QAAQ,CAAC,EAAD,CAHlB,yCAGba,OAHa,eAGJC,UAHI,8BAIcd,QAAQ,CAAC,KAAD,CAJtB,yCAIbe,SAJa,eAIFC,YAJE,8BAKgBhB,QAAQ,CAAC,CAAD,CALxB,0CAKbiB,UALa,gBAKDC,aALC,gCAMgBlB,QAAQ,CAAC,CAAD,CANxB,2CAMbmB,UANa,gBAMDC,aANC,gBAQpBnB,SAAS,CAAC,UAAM,CACde,YAAY,CAAC,IAAD,CAAZ,CACA,GAAMK,CAAAA,SAAS,EAAI,CAAEC,IAAI,CAAE,YAAR,CAAJ,4BAA+BnB,SAAS,EAAxC,EAAf,CACAS,SAAS,CAACS,SAAD,CAAT,CACAP,UAAU,CAAC,qBAAD,CAAV,CACAZ,iBAAiB,CAACiB,UAAD,CAAjB,CAA8BI,IAA9B,CAAmC,SAAAC,GAAG,CAAI,CACxCN,aAAa,CAACM,GAAG,CAACC,WAAL,CAAb,CACAf,SAAS,CAACc,GAAG,CAACE,OAAL,CAAT,CACAN,aAAa,CAACO,MAAM,CAACnB,KAAK,CAACoB,KAAN,CAAYC,MAAZ,CAAmBC,IAApB,CAAN,EAAmC,CAApC,CAAb,CACAd,YAAY,CAAC,KAAD,CAAZ,CACD,CALD,EAMD,CAXQ,CAWN,CAACR,KAAK,CAACoB,KAAN,CAAYC,MAAb,CAAqBV,UAArB,CAXM,CAAT,CAaA,GAAMY,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAC,GAAG,CAAI,CACxB,GAAIA,GAAG,GAAK,MAAZ,CAAoB,CAClBZ,aAAa,CAAC,SAAAU,IAAI,QAAIA,CAAAA,IAAI,CAAG,CAAX,EAAL,CAAb,CACD,CAFD,IAEO,IAAIE,GAAG,GAAK,MAAZ,CAAoB,CACzBZ,aAAa,CAAC,SAAAU,IAAI,QAAIA,CAAAA,IAAI,CAAG,CAAX,EAAL,CAAb,CACD,CACF,CAND,CAQA,mBACE,qDACE,2BAAK,KAAK,CAAE,CAAEG,QAAQ,CAAE,IAAZ,CAAZ,CAAgC,SAAS,CAAC,sBAA1C,eACE,oBAAC,MAAD,EAAQ,OAAO,CAAEpB,OAAjB,CAA0B,MAAM,CAAEJ,MAAlC,CAA0C,MAAM,CAAEE,MAAlD,EADF,CAEGI,SAAS,cAAG,oBAAC,UAAD,MAAH,CAAoB,IAFhC,cAGE,4CACE,oBAAC,WAAD,EACE,UAAU,CAAEgB,UADd,CAEE,UAAU,CAAEZ,UAFd,CAGE,UAAU,CAAEF,UAHd,EADF,CAHF,CADF,CADF,CAeD,CAED,cAAeV,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getTrendingMovies } from \"../utilis/Api\";\nimport { getGenres } from \"../services/fakeGenreService\";\nimport Movies from \"./movies\";\nimport LoadingBar from \"./common/loadingBar\";\nimport PageButtons from \"./common/pageButtons\";\n\nfunction Index(props) {\n  const [movies, setMovies] = useState([]);\n  const [genres, setGenres] = useState([]);\n  const [heading, setHeading] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [totalPages, setTotalPages] = useState(0);\n  const [activePage, setActivePage] = useState(1);\n\n  useEffect(() => {\n    setIsLoading(true);\n    const allGenres = [{ name: \"All Genres\" }, ...getGenres()];\n    setGenres(allGenres);\n    setHeading(\"Top Trending Movies\");\n    getTrendingMovies(activePage).then(res => {\n      setTotalPages(res.total_pages);\n      setMovies(res.results);\n      setActivePage(Number(props.match.params.page) || 1);\n      setIsLoading(false);\n    });\n  }, [props.match.params, activePage]);\n\n  const pageChange = btn => {\n    if (btn === \"next\") {\n      setActivePage(page => page + 1);\n    } else if (btn === \"back\") {\n      setActivePage(page => page - 1);\n    }\n  };\n\n  return (\n    <>\n      <div style={{ maxWidth: 1146 }} className=\"container-fluid mt-5\">\n        <Movies heading={heading} movies={movies} genres={genres} />\n        {isLoading ? <LoadingBar /> : null}\n        <div>\n          <PageButtons\n            pageChange={pageChange}\n            activePage={activePage}\n            totalPages={totalPages}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}